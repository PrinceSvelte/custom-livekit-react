{"code":"import React, { useCallback, useContext, useEffect, useState, } from \"react\";\r\nimport { faMicrophone, faMicrophoneSlash, } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { ConnectionQuality, LocalTrack, RemoteTrack, } from \"livekit-client\";\r\nimport { useParticipant, VideoRenderer } from \"@livekit/react-core\";\r\nimport { AspectRatio } from \"react-aspect-ratio\";\r\nimport { ReactComponent as connectionQuality1 } from \"../../static/connection-quality-1.svg\";\r\nimport { ReactComponent as connectionQuality2 } from \"../../static/connection-quality-2.svg\";\r\nimport { ReactComponent as connectionQuality3 } from \"../../static/connection-quality-3.svg\";\r\nimport { DisplayContext } from \"./DisplayContext\";\r\nimport styles from \"./styles.module.css\";\r\nexport const ParticipantView = ({ participant, width, height, className, speakerClassName, aspectWidth, aspectHeight, orientation, displayName, showOverlay, showConnectionQuality, onMouseEnter, onMouseLeave, onClick, }) => {\r\n    const { cameraPublication, isLocal, connectionQuality, isSpeaking } = useParticipant(participant);\r\n    const [videoSize, setVideoSize] = useState();\r\n    const [currentBitrate, setCurrentBitrate] = useState();\r\n    const context = useContext(DisplayContext);\r\n    const handleResize = useCallback((width, height) => {\r\n        setVideoSize(`${width}x${height}`);\r\n    }, []);\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            let total = 0;\r\n            participant.tracks.forEach((pub) => {\r\n                if (pub.track instanceof LocalTrack ||\r\n                    pub.track instanceof RemoteTrack) {\r\n                    total += pub.track.currentBitrate;\r\n                }\r\n            });\r\n            setCurrentBitrate(total);\r\n        }, 1000);\r\n        return () => {\r\n            clearInterval(interval);\r\n        };\r\n    }, []);\r\n    const containerStyles = {\r\n        width: width,\r\n        height: height,\r\n    };\r\n    // when aspect matches, cover instead\r\n    let objectFit = \"contain\";\r\n    let videoOrientation;\r\n    if (!orientation && aspectWidth && aspectHeight) {\r\n        orientation = aspectWidth > aspectHeight ? \"landscape\" : \"portrait\";\r\n    }\r\n    if (cameraPublication?.dimensions) {\r\n        videoOrientation =\r\n            cameraPublication.dimensions.width > cameraPublication.dimensions.height\r\n                ? \"landscape\"\r\n                : \"portrait\";\r\n    }\r\n    if (videoOrientation === orientation) {\r\n        objectFit = \"cover\";\r\n    }\r\n    if (!displayName) {\r\n        displayName = participant.name || participant.identity;\r\n        if (isLocal) {\r\n            displayName += \" (You)\";\r\n        }\r\n    }\r\n    let mainElement;\r\n    if (cameraPublication?.isSubscribed &&\r\n        cameraPublication?.track &&\r\n        !cameraPublication?.isMuted) {\r\n        mainElement = (React.createElement(VideoRenderer, { track: cameraPublication.track, isLocal: isLocal, objectFit: objectFit, width: \"100%\", height: \"100%\", className: styles.video, onSizeChanged: handleResize }));\r\n    }\r\n    else {\r\n        mainElement = React.createElement(\"div\", { className: styles.placeholder });\r\n    }\r\n    const classes = [styles.participant];\r\n    if (className) {\r\n        classes.push(className);\r\n    }\r\n    if (isSpeaking) {\r\n        classes.push(speakerClassName ?? styles.speaker);\r\n    }\r\n    const isAudioMuted = !participant.isMicrophoneEnabled;\r\n    // gather stats\r\n    let statsContent;\r\n    if (context.showStats) {\r\n        statsContent = (React.createElement(\"div\", { className: styles.stats },\r\n            React.createElement(\"span\", null, videoSize),\r\n            currentBitrate !== undefined && currentBitrate > 0 && (React.createElement(\"span\", null,\r\n                \"\\u00A0\",\r\n                Math.round(currentBitrate / 1024),\r\n                \" kbps\"))));\r\n    }\r\n    let ConnectionQualityIndicator;\r\n    if (showConnectionQuality) {\r\n        switch (connectionQuality) {\r\n            case ConnectionQuality.Excellent:\r\n                ConnectionQualityIndicator = connectionQuality3;\r\n                break;\r\n            case ConnectionQuality.Good:\r\n                ConnectionQualityIndicator = connectionQuality2;\r\n                break;\r\n            case ConnectionQuality.Poor:\r\n                ConnectionQualityIndicator = connectionQuality1;\r\n                break;\r\n        }\r\n    }\r\n    return (React.createElement(\"div\", { className: classes.join(\" \"), style: containerStyles, onMouseEnter: onMouseEnter, onMouseLeave: onMouseLeave, onClick: onClick },\r\n        aspectWidth && aspectHeight && (React.createElement(AspectRatio, { ratio: aspectWidth / aspectHeight }, mainElement)),\r\n        (!aspectWidth || !aspectHeight) && mainElement,\r\n        (showOverlay || context.showStats) && (React.createElement(\"div\", { className: styles.participantBar },\r\n            React.createElement(\"div\", { className: styles.name }, displayName),\r\n            React.createElement(\"div\", { className: styles.center }, statsContent),\r\n            React.createElement(\"div\", null, ConnectionQualityIndicator && React.createElement(ConnectionQualityIndicator, null)),\r\n            React.createElement(\"div\", null,\r\n                React.createElement(FontAwesomeIcon, { icon: isAudioMuted ? faMicrophoneSlash : faMicrophone, height: 24, className: isAudioMuted ? styles.iconRed : styles.iconNormal }))))));\r\n};\r\n//# sourceMappingURL=ParticipantView.js.map","references":["/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/@types/react/ts5.0/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/@fortawesome/free-solid-svg-icons/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/@fortawesome/react-fontawesome/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/csstype/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/livekit-client/dist/src/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/@livekit/react-core/dist/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/node_modules/react-aspect-ratio/dist/index.d.ts","/Users/princerajput/custom-livekit/@livekit/react-components/src/components/DisplayContext.tsx"],"map":"{\"version\":3,\"file\":\"ParticipantView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/components/ParticipantView.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/princerajput/custom-livekit/@livekit/react-components/components/ParticipantView.d.ts","writeByteOrderMark":false,"text":"import React from \"react\";\r\nimport { Property } from \"csstype\";\r\nimport { Participant } from \"livekit-client\";\r\nexport interface ParticipantProps {\r\n    participant: Participant;\r\n    displayName?: string;\r\n    width?: Property.Width;\r\n    height?: Property.Height;\r\n    className?: string;\r\n    aspectWidth?: number;\r\n    aspectHeight?: number;\r\n    orientation?: \"landscape\" | \"portrait\";\r\n    showOverlay?: boolean;\r\n    showConnectionQuality?: boolean;\r\n    speakerClassName?: string;\r\n    onMouseEnter?: () => void;\r\n    onMouseLeave?: () => void;\r\n    onClick?: () => void;\r\n}\r\nexport declare const ParticipantView: ({ participant, width, height, className, speakerClassName, aspectWidth, aspectHeight, orientation, displayName, showOverlay, showConnectionQuality, onMouseEnter, onMouseLeave, onClick, }: ParticipantProps) => React.JSX.Element;\r\n"}}
